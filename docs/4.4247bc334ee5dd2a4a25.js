(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{jcJX:function(r,t,e){"use strict";e.r(t),e.d(t,"AccountModule",function(){return q});var n=e("3Pt+"),o=e("ofXK"),i=e("tyNb"),a=e("fXoL"),s=e("5ZPe");let c=(()=>{class r{constructor(r,t){this.router=r,this.accountService=t,this.accountService.userValue&&this.router.navigate(["/"])}}return r.\u0275fac=function(t){return new(t||r)(a.Ob(i.c),a.Ob(s.a))},r.\u0275cmp=a.Ib({type:r,selectors:[["ng-component"]],decls:2,vars:0,consts:[[1,"container"]],template:function(r,t){1&r&&(a.Ub(0,"div",0),a.Pb(1,"router-outlet"),a.Tb())},directives:[i.g],styles:[""]}),r})();var m=e("mrSG"),b=e("f5O9"),l=e("TQUI"),u=e("Wp6s"),d=e("kmnG"),f=e("qFsG"),p=e("f0Cb"),h=e("bTqV");function g(r,t){1&r&&(a.Ub(0,"mat-error"),a.Cc(1,"Username is required"),a.Tb())}function v(r,t){1&r&&(a.Ub(0,"mat-error"),a.Cc(1,"Password is required"),a.Tb())}function C(r,t){1&r&&a.Pb(0,"span",9)}function U(r,t){1&r&&(a.Ub(0,"mat-error"),a.Cc(1,"Firstname is required"),a.Tb())}function T(r,t){1&r&&(a.Ub(0,"mat-error"),a.Cc(1,"Lastname is required"),a.Tb())}function w(r,t){1&r&&(a.Ub(0,"mat-error"),a.Cc(1,"Username is required"),a.Tb())}function y(r,t){1&r&&(a.Ub(0,"mat-error"),a.Cc(1,"Password is required"),a.Tb())}function I(r,t){1&r&&a.Pb(0,"span",11)}const S=[{path:"",component:c,children:[{path:"login",component:(()=>{class r{constructor(r,t,e,n,o,i){this.formBuilder=r,this.route=t,this.router=e,this.accountService=n,this.alertService=o,this.familyService=i,this.loading=!1,this.submitted=!1}ngOnInit(){this.form=this.formBuilder.group({username:["",n.s.required],password:["",n.s.required]}),this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/"}get f(){return this.form.controls}onSubmit(){return Object(m.b)(this,void 0,void 0,function*(){this.submitted=!0,this.alertService.clear(),this.form.invalid||(this.loading=!0,(yield this.accountService.login(this.f.username.value,this.f.password.value).catch(r=>{this.alertService.error(r),console.error(r),this.submitted=!1,this.loading=!1}))&&(this.familyService.loadFamily(),this.router.navigate([this.returnUrl])))})}}return r.\u0275fac=function(t){return new(t||r)(a.Ob(n.d),a.Ob(i.a),a.Ob(i.c),a.Ob(s.a),a.Ob(b.a),a.Ob(l.a))},r.\u0275cmp=a.Ib({type:r,selectors:[["ng-component"]],decls:23,vars:5,consts:[[1,"login-form",3,"formGroup","ngSubmit"],["appearance","fill"],["matInput","","type","text","formControlName","username","placeholder","pat@example.com"],[4,"ngIf"],["matInput","","type","text","formControlName","password","placeholder","pat@example.com"],[1,"button-group"],["mat-flat-button","","color","primary",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["mat-button","","routerLink","../register"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(r,t){1&r&&(a.Ub(0,"mat-card"),a.Ub(1,"mat-card-header"),a.Ub(2,"mat-card-title"),a.Cc(3,"Login"),a.Tb(),a.Tb(),a.Ub(4,"mat-card-content"),a.Ub(5,"form",0),a.bc("ngSubmit",function(){return t.onSubmit()}),a.Ub(6,"mat-form-field",1),a.Ub(7,"mat-label"),a.Cc(8,"Username"),a.Tb(),a.Pb(9,"input",2),a.Ac(10,g,2,0,"mat-error",3),a.Tb(),a.Ub(11,"mat-form-field",1),a.Ub(12,"mat-label"),a.Cc(13,"Password"),a.Tb(),a.Pb(14,"input",4),a.Ac(15,v,2,0,"mat-error",3),a.Tb(),a.Pb(16,"mat-divider"),a.Ub(17,"div",5),a.Ub(18,"button",6),a.Ac(19,C,1,0,"span",7),a.Cc(20," Login "),a.Tb(),a.Ub(21,"button",8),a.Cc(22," Register "),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb()),2&r&&(a.Cb(5),a.lc("formGroup",t.form),a.Cb(5),a.lc("ngIf",t.f.username.errors),a.Cb(5),a.lc("ngIf",t.f.password.errors),a.Cb(3),a.lc("disabled",t.loading),a.Cb(1),a.lc("ngIf",t.loading))},directives:[u.a,u.c,u.e,u.b,n.t,n.n,n.h,d.c,d.f,f.b,n.c,n.m,n.g,o.m,p.a,h.a,i.d,d.b],styles:[".button-group[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:row;justify-content:flex-start;margin-top:2rem}.mat-card[_ngcontent-%COMP%]   .mat-divider-horizontal[_ngcontent-%COMP%]{position:relative}"]}),r})()},{path:"register",component:(()=>{class r{constructor(r,t,e,n,o){this.formBuilder=r,this.route=t,this.router=e,this.accountService=n,this.alertService=o,this.loading=!1,this.submitted=!1}ngOnInit(){this.form=this.formBuilder.group({firstname:["",n.s.required],lastname:["",n.s.required],username:["",n.s.required],password:["",[n.s.required,n.s.minLength(6)]]})}get f(){return this.form.controls}onSubmit(){return Object(m.b)(this,void 0,void 0,function*(){this.submitted=!0,this.alertService.clear(),this.form.invalid||(this.loading=!0,(yield this.accountService.register(this.form.value).catch(r=>{this.alertService.error(r),this.loading=!1}))&&(this.alertService.success("Registration successful",{keepAfterRouteChange:!0}),this.router.navigate(["../login"],{relativeTo:this.route})))})}}return r.\u0275fac=function(t){return new(t||r)(a.Ob(n.d),a.Ob(i.a),a.Ob(i.c),a.Ob(s.a),a.Ob(b.a))},r.\u0275cmp=a.Ib({type:r,selectors:[["ng-component"]],decls:33,vars:7,consts:[[3,"formGroup","ngSubmit"],["appearance","fill"],["matInput","","type","text","formControlName","firstname","placeholder","Max"],[4,"ngIf"],["matInput","","type","text","formControlName","lastname","placeholder","Mustermann"],["matInput","","type","text","formControlName","username","placeholder","max.mustermann@mail.com"],["matInput","","type","password","formControlName","password","placeholder","max.mustermann@mail.com"],[1,"button-group"],["mat-flat-button","","color","primary",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["mat-button","","routerLink","../login"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(r,t){1&r&&(a.Ub(0,"mat-card"),a.Ub(1,"mat-card-header"),a.Ub(2,"mat-card-title"),a.Cc(3,"Register"),a.Tb(),a.Tb(),a.Ub(4,"mat-card-content"),a.Ub(5,"form",0),a.bc("ngSubmit",function(){return t.onSubmit()}),a.Ub(6,"mat-form-field",1),a.Ub(7,"mat-label"),a.Cc(8,"Firstname"),a.Tb(),a.Pb(9,"input",2),a.Ac(10,U,2,0,"mat-error",3),a.Tb(),a.Ub(11,"mat-form-field",1),a.Ub(12,"mat-label"),a.Cc(13,"Lastname"),a.Tb(),a.Pb(14,"input",4),a.Ac(15,T,2,0,"mat-error",3),a.Tb(),a.Ub(16,"mat-form-field",1),a.Ub(17,"mat-label"),a.Cc(18,"Username"),a.Tb(),a.Pb(19,"input",5),a.Ac(20,w,2,0,"mat-error",3),a.Tb(),a.Ub(21,"mat-form-field",1),a.Ub(22,"mat-label"),a.Cc(23,"Password"),a.Tb(),a.Pb(24,"input",6),a.Ac(25,y,2,0,"mat-error",3),a.Tb(),a.Pb(26,"mat-divider"),a.Ub(27,"div",7),a.Ub(28,"button",8),a.Ac(29,I,1,0,"span",9),a.Cc(30," Register "),a.Tb(),a.Ub(31,"button",10),a.Cc(32," Cancel "),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb()),2&r&&(a.Cb(5),a.lc("formGroup",t.form),a.Cb(5),a.lc("ngIf",null==t.f.firstname.errors?null:t.f.firstname.errors.required),a.Cb(5),a.lc("ngIf",null==t.f.lastname.errors?null:t.f.lastname.errors.required),a.Cb(5),a.lc("ngIf",null==t.f.username.errors?null:t.f.username.errors.required),a.Cb(5),a.lc("ngIf",null==t.f.password.errors?null:t.f.password.errors.required),a.Cb(3),a.lc("disabled",t.loading),a.Cb(1),a.lc("ngIf",t.loading))},directives:[u.a,u.c,u.e,u.b,n.t,n.n,n.h,d.c,d.f,f.b,n.c,n.m,n.g,o.m,p.a,h.a,i.d,d.b],encapsulation:2}),r})()}]}];let O=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=a.Mb({type:r}),r.\u0275inj=a.Lb({imports:[[i.f.forChild(S)],i.f]}),r})();var P=e("gDQQ");let q=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=a.Mb({type:r}),r.\u0275inj=a.Lb({imports:[[o.c,n.r,O,P.a]]}),r})()}}]);